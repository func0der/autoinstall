autoinstall:
  version: 1
  interactive-sections:
    - identity
    - storage
  early-commands: []
    # - generate passphrase
    # - activate reset partition if drive big enough
    # - Build identity section
  late-commands:
    - >
      USERNAME=$(cat /etc/passwd | grep --only-matching '.*1000:.*' | cut --fields=1 --delimiter=:)
      INITIALS=$(echo $USERNAME | cut --fields=1 --delimiter=: | sed --regexp-extended 's/(^.).*_(.).+/\U\1\2/g')
      HASHED_PASSWORD="$(echo ${INITIALS}123 | mkpasswd)"
      echo "${USERNAME}:${HASHED_PASSWORD}" | chpasswd -e
    # - activate reset partition if drive big enough
    # - Build identity section
  locale: en_GB.UTF-8
  refresh-installer:
    update: true
  keyboard:
    layout: de
  source:
    search_drivers: true
  storage:
    layout:
      name: lvm
      password: test123
      sizing-policy: scaled
    swap:
      size: 16GB
      maxsize: 24GB
  identity:
    username: ''
    password: ''
    hostname: inventar-
  user-data:
    users: ['']
  codecs:
    install: true
  drivers:
    install: true
  snaps:
    - name: code
    - name: phpstorm
    - name: chromium
    - name: firefox
  timezone: geoip
  updates: all
